<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.fyg.microcredito.dao.resources.OperacionesMicroCreditoDAO">
	
	<insert id="insertaRegistroUsuarios" parameterType="usuarios">
		INSERT INTO usuarios
	(
		usuario,
		id_perfil,
		persona,
		contrasenia,
		cambio_contrasenia,
		fecha_alta,
		fecha_ult_mod,
		estatus
	)
        VALUES(#{usuario},#{id_perfil},#{persona},#{contrasenia},#{cambio_contrasenia},#{fecha_alta},#{fecha_ult_mod},#{estatus})
	</insert>
	
	<insert id="insertaRegistroPersonas" parameterType="personas" useGeneratedKeys="true" keyProperty="persona"  keyColumn="persona">
		INSERT INTO personas
		(
			persona,
			nombre,
			apellido_pat,
			apellido_mat,
			sexo,
			rfc,
			curp,
			fecha_nacimiento,
			fecha_alta,
			fecha_ult_mod,
			estatus
		)
		VALUES(#{persona}, #{nombre}, #{apellido_pat}, #{apellido_mat}, #{sexo}, #{rfc}, #{curp}, #{fecha_nacimiento}, #{fecha_alta}, #{fecha_ult_mod}, #{estatus})
	</insert>

<update id="actualizaRegistroUsuarios" parameterType="usuarios">
UPDATE usuarios SET
		estatus = #{estatus},
		fecha_ult_mod=#{fecha_ult_mod}
	WHERE usuario = #{usuario}
</update>

</mapper>